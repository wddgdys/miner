(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34943c82"],{"5eb1":function(e,t,i){"use strict";var n=i("b70e"),a=i.n(n);a.a},a481:function(e,t,i){"use strict";var n=i("cb7c"),a=i("4bf8"),s=i("9def"),o=i("4588"),r=i("0390"),c=i("5f1b"),l=Math.max,d=Math.min,u=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,v=function(e){return void 0===e?e:String(e)};i("214f")("replace",2,(function(e,t,i,f){return[function(n,a){var s=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,s,a):i.call(String(s),n,a)},function(e,t){var a=f(i,e,this,t);if(a.done)return a.value;var u=n(e),h=String(this),p="function"===typeof t;p||(t=String(t));var m=u.global;if(m){var b=u.unicode;u.lastIndex=0}var y=[];while(1){var w=c(u,h);if(null===w)break;if(y.push(w),!m)break;var _=String(w[0]);""===_&&(u.lastIndex=r(h,s(u.lastIndex),b))}for(var x="",k=0,S=0;S<y.length;S++){w=y[S];for(var $=String(w[0]),I=l(d(o(w.index),h.length),0),P=[],T=1;T<w.length;T++)P.push(v(w[T]));var C=w.groups;if(p){var D=[$].concat(P,I,h);void 0!==C&&D.push(C);var R=String(t.apply(void 0,D))}else R=g($,h,I,P,C,t);I>=k&&(x+=h.slice(k,I)+R,k=I+$.length)}return x+h.slice(k)}];function g(e,t,n,s,o,r){var c=n+e.length,l=s.length,d=p;return void 0!==o&&(o=a(o),d=h),i.call(r,d,(function(i,a){var r;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(c);case"<":r=o[a.slice(1,-1)];break;default:var d=+a;if(0===d)return i;if(d>l){var h=u(d/10);return 0===h?i:h<=l?void 0===s[h-1]?a.charAt(1):s[h-1]+a.charAt(1):i}r=s[d-1]}return void 0===r?"":r}))}}))},b4c05:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"indexContainer"},[i("div",{staticClass:"header"},[i("span",[e._v("矿机用户列表")]),i("a-button",{staticClass:"button",on:{click:e.logout}},[e._v("登出")])],1),i("div",{staticClass:"search"},[i("a-input",{staticClass:"searchInput",attrs:{placeholder:"请输入要搜索的手机号",allowClear:!0},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),i("a-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")]),e._v("\n         \n    "),i("span",[e._v("开启提现功能")]),i("a-switch",{attrs:{checked:e.checked},on:{change:e.changeSwitch}})],1),i("div",{staticClass:"table"},[i("a-table",{attrs:{columns:e.columns,dataSource:e.data,pagination:!1},scopedSlots:e._u([{key:"operation",fn:function(t,n){return i("div",{},[0===n.finish?i("a",{staticStyle:{margin:"0 5px"},attrs:{href:"javascript:;"},on:{click:function(t){return e.resolve(n.id)}}},[e._v("通过审核")]):e._e(),1===n.status?i("a",{staticStyle:{margin:"0 5px"},attrs:{href:"javascript:;"},on:{click:function(t){return e.freeze(n.id,2)}}},[e._v("冻结")]):e._e(),2===n.status?i("a",{staticStyle:{margin:"0 5px"},attrs:{href:"javascript:;"},on:{click:function(t){return e.freeze(n.id,1)}}},[e._v("解冻")]):e._e(),i("a",{staticStyle:{margin:"0 5px"},attrs:{href:"javascript:;"},on:{click:function(t){return e.editPoints(n.id)}}},[e._v("操作积分")]),i("a",{staticStyle:{margin:"0 5px"},attrs:{href:"javascript:;"},on:{click:function(t){return e.reSetPassword(n.id)}}},[e._v("重置密码")]),i("a",{staticStyle:{margin:"0 5px"},attrs:{href:"javascript:;"},on:{click:function(t){return e.showTeam(n.id)}}},[e._v("查看团队")]),n.frozen_points<3e4?i("a",{staticStyle:{margin:"0 5px"},attrs:{href:"javascript:;"},on:{click:function(t){return e.update(n.id,n.frozen_points)}}},[e._v("升级矿机")]):e._e(),1==n.plan?i("a",{staticStyle:{margin:"0 5px"},attrs:{href:"javascript:;"},on:{click:function(t){return e.changevip(n.id,5)}}},[e._v("升级vip")]):e._e(),5==n.plan?i("a",{staticStyle:{margin:"0 5px"},attrs:{href:"javascript:;"},on:{click:function(t){return e.changevip(n.id,1)}}},[e._v("关闭vip")]):e._e()])}},{key:"finish",fn:function(t,n){return i("div",{},[e._v("\n        "+e._s(5===n.plan?"vip":1===n.plan?"会员":0===n.plan?"游客":"")+"\n      ")])}},{key:"status",fn:function(t,n){return i("div",{},[e._v("\n        "+e._s(1===n.status?"正常":"冻结")+"\n      ")])}}])})],1),i("div",{staticClass:"page"},[i("a-pagination",{attrs:{defaultCurrent:e.current,total:e.total,showLessItems:""},on:{change:e.changePage}})],1),i("a-modal",{attrs:{title:"增减积分",maskClosable:!1},on:{ok:e.doEdit,cancel:e.cancelReject},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("div",[i("a-radio-group",{staticStyle:{"margin-bottom":"20px"},on:{change:e.changeEditPointsType},model:{value:e.editPointsType,callback:function(t){e.editPointsType=t},expression:"editPointsType"}},[i("a-radio-button",{attrs:{value:"1"}},[e._v("增加积分")]),i("a-radio-button",{attrs:{value:"2"}},[e._v("减少积分")])],1),i("a-input",{attrs:{type:"number",placeholder:"请输入要更改的积分数"},model:{value:e.points,callback:function(t){e.points=t},expression:"points"}})],1)]),i("a-modal",{attrs:{title:"查看团队成员详情",maskClosable:!1},on:{cancel:e.closeTeam},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},[i("template",{slot:"footer"},[i("div")]),i("div",{staticStyle:{"max-height":"650px","overflow-y":"auto"}},[i("a-tree",{attrs:{"load-data":e.loadTree,loadedKeys:e.loadedKeys,expandedKeys:e.expandedKeys,"tree-data":e.treeData}})],1)],2),i("a-modal",{attrs:{title:"重置密码",maskClosable:!1},on:{ok:e.doReset,cancel:e.cancelReSetPassword},model:{value:e.visible3,callback:function(t){e.visible3=t},expression:"visible3"}},[i("div",[i("a-input",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),i("a-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.repassword,callback:function(t){e.repassword=t},expression:"repassword"}})],1)]),i("a-modal",{attrs:{title:"审核",maskClosable:!1},on:{ok:e.doResolve,cancel:e.cancelResolve},model:{value:e.visible4,callback:function(t){e.visible4=t},expression:"visible4"}},[i("div",[i("span",[e._v("请选择矿机等级：")]),i("a-select",{staticStyle:{width:"120px"},on:{change:e.changeLevel},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}},e._l(e.levelData,(function(t,n){return i("a-select-option",{key:n,attrs:{value:t.frozen_points}},[e._v(e._s(t.name))])})),1)],1)]),i("a-modal",{attrs:{title:"升级矿机",maskClosable:!1},on:{ok:e.doUpdate,cancel:e.cancelUpdate},model:{value:e.visible5,callback:function(t){e.visible5=t},expression:"visible5"}},[i("div",[i("span",[e._v("请选择矿机等级：")]),i("a-select",{staticStyle:{width:"120px"},on:{change:e.changeLevel},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}},e._l(e.levelData,(function(t,n){return i("a-select-option",{key:n,attrs:{value:t.frozen_points,disabled:t.frozen_points<=e.point}},[e._v(e._s(t.name))])})),1)],1)])],1)},a=[];function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function o(e){if(Array.isArray(e))return s(e)}function r(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e,t){if(e){if("string"===typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e){return o(e)||r(e)||c(e)||l()}i("ac6a"),i("a481");var u=i("8ded"),h=i.n(u),p={data:function(){return{keywords:"",checked:!1,columns:[{title:"手机号",dataIndex:"phone",align:"center"},{title:"姓名",dataIndex:"name",align:"center"},{title:"游戏ID",dataIndex:"game",align:"center"},{title:"矿机等级",dataIndex:"minerStr",align:"center"},{title:"冻结积分",dataIndex:"frozen_points",align:"center"},{title:"可用积分",dataIndex:"active_points",align:"center"},{title:"已提现积分",dataIndex:"withdraw",align:"center"},{title:"上级",dataIndex:"parent_phone",align:"center"},{title:"团队第一人",dataIndex:"top_phone",align:"center"},{title:"团队单数",dataIndex:"lines",align:"center"},{title:"添加时间",dataIndex:"created_at",align:"center"},{title:"用户类型",scopedSlots:{customRender:"finish"},align:"center"},{title:"用户状态",scopedSlots:{customRender:"status"},align:"center"},{title:"操作",scopedSlots:{customRender:"operation"},align:"center"}],data:[],levelData:[],total:0,current:1,visible:!1,visible2:!1,visible3:!1,visible4:!1,visible5:!1,upDateId:"",point:0,resolveId:"",level:"",editId:"",resetId:"",password:"",repassword:"",points:"",editPointsType:"",treeData:[],loadedKeys:[],expandedKeys:[]}},methods:{logout:function(){h.a.clearAll(),this.$message.success("已登出!"),this.$router.replace("/login")},search:function(){this.getList(1,this.keywords)},changePage:function(e){this.current=e,this.getList(this.current,this.keywords)},resolve:function(e){this.visible4=!0,this.resolveId=e},changeLevel:function(e){this.level=e},doResolve:function(){var e=this;if(this.level){this.data.forEach((function(t,i){t.id===e.resolveId&&i})),this.$api.index_api.userAudit({id:this.resolveId,frozen_points:this.level,finish:1}).then((function(t){"操作成功"===t&&(e.$message.success(t),e.level="",e.visible4=!1,e.getList(e.current,e.keywords))})).catch((function(e){console.log(e)}))}else this.$message.error("请选择矿机等级")},cancelResolve:function(){this.level=""},update:function(e,t){this.visible5=!0,this.upDateId=e,this.point=t},doUpdate:function(){var e=this;if(this.level){this.data.forEach((function(t,i){t.id===e.resolveId&&i})),this.$api.index_api.upDate({id:this.upDateId,frozen_points:this.level,finish:1}).then((function(t){"操作成功"===t&&(e.$message.success(t),e.level="",e.visible5=!1,e.getList(e.current,e.keywords))})).catch((function(e){console.log(e)}))}else this.$message.error("请选择矿机等级")},cancelUpdate:function(){this.point=0,this.level=""},changevip:function(e,t){var i=this;this.$api.index_api.tovip({id:e,plan:t}).then((function(e){"操作成功"===e&&(i.$message.success(e),i.getList(i.current,i.keywords))})).catch((function(e){console.log(e)}))},freeze:function(e,t){var i=this,n=0;this.data.forEach((function(t,i){t.id===e&&(n=i)})),this.$api.index_api.status({id:e,status:t}).then((function(e){"操作成功"===e&&(2===t?i.$message.success("账号已成功冻结"):1===t&&i.$message.success("账号已解除冻结"),i.data[n].status=t)})).catch((function(e){console.log(e)}))},editPoints:function(e){this.visible=!0,this.editId=e},changeEditPointsType:function(e){this.editPointsType=e.target.value},doEdit:function(){var e=this;if(this.editPointsType)if(this.points){var t=0;this.data.forEach((function(i,n){i.id===e.editId&&(t=n)})),this.$api.index_api.points({id:this.editId,func:this.editPointsType,points:this.points}).then((function(i){"number"===typeof i&&(e.$message.success("积分更改成功"),e.data[t].active_points=i,e.editPointsType="",e.points="",e.visible=!1)})).catch((function(e){console.log(e)}))}else this.$message.error("请输入要更改的积分数");else this.$message.error("请选择操作积分类型")},cancelReject:function(){this.editPointsType="",this.points=""},showTeam:function(e){this.getTreeData(e)},closeTeam:function(){this.treeData=[],this.expandedKeys=[]},loadTree:function(e){var t=this;return new Promise((function(i){e.dataRef.children?i():t.$api.index_api.children({id:e.dataRef.id}).then((function(n){t.expandedKeys.push(e.dataRef.key),e.dataRef.children=n.children,t.treeData=d(t.treeData),i()})).catch((function(e){console.log(e),close()}))}))},getTreeData:function(e){var t=this,i=this.$message.loading("加载中",0);this.$api.index_api.children({id:e}).then((function(e){i(),e.children.length?(t.visible2=!0,t.treeData=e.children):t.$message.warning("此账号没有下级")})).catch((function(e){console.log(e),i()}))},reSetPassword:function(e){this.visible3=!0,this.resetId=e},cancelReSetPassword:function(){this.password="",this.repassword=""},doReset:function(){var e=this;this.password===this.repassword?this.$api.index_api.resetpwd({id:this.resetId,password:this.repassword}).then((function(t){t instanceof Array&&0===t.length&&(e.$message.success("密码重置成功"),e.password="",e.repassword="",e.visible3=!1)})).catch((function(e){console.log(e)})):this.$message.error("两次密码输入不一致")},getLevelList:function(){var e=this;this.$api.index_api.level().then((function(t){e.levelData=t})).catch((function(e){console.log(e)}))},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1?arguments[1]:void 0,n=this.$message.loading("加载中",0);this.$api.index_api.member({page:t,keywords:i}).then((function(t){e.data=t.lists.data,e.total=t.lists.total,n()})).catch((function(e){console.log(e),n()}))},getSwitch:function(){var e=this;this.$api.index_api.switch().then((function(t){e.checked=1==t})).catch((function(e){console.log(e),close()}))},changeSwitch:function(e){var t=this;this.$api.index_api.withdrawConfig({is_withdraw:e?1:2}).then((function(){t.checked=e})).catch((function(e){console.log(e),close()}))}},created:function(){window._this=this,this.getLevelList(),this.getList(),this.getSwitch()}},v=p,f=(i("5eb1"),i("2877")),g=Object(f["a"])(v,n,a,!1,null,"26a784fb",null);t["default"]=g.exports},b70e:function(e,t,i){}}]);